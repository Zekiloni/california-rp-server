<!DOCTYPE html>
<html>
<head>
   <!-- meta tags-->
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

   <!-- source -->
   <link rel="stylesheet" type="text/css" href="src/vendor/css/fonts.css" />
   <link rel="stylesheet" type="text/css" href="src/vendor/css/font-awesome.css" />

   <link rel="stylesheet" type="text/css" href="src/styles/clothing.css" />

</head>
<body>
   <div id="clothing">
      <div class="right">

         <ul class="navigation">
            <li v-on:click="Page('home')" :class="{ 'active' : isActive('home') }"> <i class="fa fa-cart-plus"> </i> </li>
            <li v-on:click="Page('shirt')" :class="{ 'active' : isActive('shirt') }"> <i class="fas fa-tshirt"></i> </li>
            <li v-on:click="Page('undershirt')" :class="{ 'active' : isActive('undershirt') }"> <i class="fas fa-tshirt"></i> </li>
            <li v-on:click="Page('legs')" :class="{ 'active' : isActive('legs') }"> <i class="fas fa-walking"></i> </li>
            <li v-on:click="Page('shoes')" :class="{ 'active' : isActive('shoes') }"> <i class="fas fa-shoe-prints"></i> </li>

            <li v-on:click="Page('watch')" :class="{ 'active' : isActive('watch') }"> <i class="fas fa-clock"></i> </li>
            <li v-on:click="Page('glasses')" :class="{ 'active' : isActive('glasses') }"> <i class="fas fa-glasses"></i> </li>
            <li v-on:click="Page('ears')" :class="{ 'active' : isActive('ears') }"> <i class="fa fa-deaf"></i> </li>
            <li v-on:click="Page('bracelet')" :class="{ 'active' : isActive('bracelet') }"> <i class="fas fa-ring"></i> </li>
            <li v-on:click="Page('hat')" :class="{ 'active' : isActive('hat') }"> <i class="fab fa-redhat"></i> </li>
         </ul>

         <div class="page">
            <transition name="scale" mode="out-in">
               <div v-if="page == 'home'" class="info" :key="page">
                  <h4> Prodavnica odeće </h4>
                  <h2 class="business-name"> {{ Business.Name }} </h2>
                  <div class="buy">
                     <h3> cena </h3>
                     <h2 class="price"> {{ Dollars(Cart()) }} </h2>
                     <button class="buy" :disabled="Cart() < 1"> Potvrdi Kupovinu </button>
                  </div>
               </div>

               <div v-else class="window" :key="page" >
                  <h2 class="title"> {{ pages[page] }} </h2>
                  <div class="drawable">
                     <h5> Model </h5>
                     <button v-on:click="Drawable(page, 0)"> - </button>
                     <h2> {{ Clothings[page].value }} </h2>
                     <button v-on:click="Drawable(page, 1)"> + </button>
                  </div>
                  <div class="texture">
                     <h5> Tekstura </h5>
                     <button v-on:click="Texture(page, 0)"> - </button>
                     <h2> {{ Clothings[page].texture }} </h2>
                     <button v-on:click="Texture(page, 1)"> + </button>
                  </div>
               </div>
            </transition>
         </div>
      </div>
   </div>
      
   <!-- scripts -->
   <script src="src/vendor/js/vue.js"></script>
   <script>

      let clothing = new Vue({
         el: '#clothing',
         data: {      

            Business: {
               Name: 'ime',
               id: null,
               Multiplier: 2.5,
            },

            page: 'home',
            pages: { 
               'shirt': 'Gornji Delovi',
               'undershirt': 'Podmajice / Potkošulje',
               'legs': 'Donji Delovi', 
               'shoes': 'Obuća',
               'bags': 'Torbe',
               'armour': 'Pancir',
               'hat': 'Šešir',
               'glasses': 'Naoćare',
               'ears': 'Uši',
               'watch': 'Satovi',
               'bracelet': 'Narukvice'
            },

            player: { 
               money: 0,
               clothing: [
                  shirt = [0, 0],
                  undershirt = [0, 0],
                  legs = [0, 0],
                  shoes = [0, 0],
                  bags = [0, 0],
                  armour = [0, 0],
                  hat = [0, 0],
                  glasses = [0, 0],
                  ears = [0, 0],
                  watch = [0, 0],
                  bracelet = [0, 0]
               ],

            },

            Clothings: {
               'shirt': { index: 11, value: 0, texture: 0, max: { value: 362, texture: 100 } },
               'undershirt': { index: 8, value: 0, texture: 0, max: { value: 178, texture: 100 } },
               'legs': { index: 4, value: 0, texture: 0, max: { value: 133, texture: 100 } }, 
               'shoes': { index: 6, value: 0, texture: 0, max: { value: 98, texture: 100 } },
               'bags': { index: 0, value: 0, texture: 0, max: { value: 100, texture: 100 } },
               'armour': { index: 0, value: 0, texture: 0, max: { value: 100, texture: 100 } },
               'hat': { index: 0, value: 0, texture: 0, max: { value: 100, texture: 100 } },
               'glasses': { index: 0, value: 0, texture: 0, max: { value: 100, texture: 100 } },
               'ears': { index: 0, value: 0, texture: 0, max: { value: 100, texture: 100 } },
               'watch': { index: 0, value: 0, texture: 0, max: { value: 100, texture: 100 } },
               'bracelet': { index: 0, value: 0, texture: 0, max: { value: 100, texture: 100 } },
            }
         },

         created () {
            window.addEventListener('wheel', this.Zoom);
         },

         methods: { 

            Page: function (i) { this.page = i; this.anim = true; },

            isActive: function (i) { return this.page == i ? true : false; },

            Cart: function () { 
               let bill = 0;
               for (let i in this.Clothings) { 
                  const Item = this.Clothings[i];
                  if (Item.value != 0) bill += this.Business.Multiplier;
               }
               return bill;
            },

            Items: function () { 
               let buyed = [];
               for (const i in this.Clothings) {
                  const Item = this.Clothings[i];
                  if (Item.value != 0) { 
                     buyed.push({ component: i, drawable: Item.value, texture: Item.texture });
                  }
               }
               return buyed;
            },

            Zoom: function (event) { mp.trigger('client:player.camera:zoom', event.deltaY); },

            Drawable: function (x, i) { 
               if (i == 0) { this.Clothings[x].value --; if (this.Clothings[x].value < 0) this.Clothings[x].value = 0; }
               else if (i == 1) { this.Clothings[x].value ++; if (this.Clothings[x].value >= this.Clothings[x].max.value) this.Clothings[x].value = this.Clothings[x].max.value; }
               mp.trigger('client:business.clothing:model:preview', x, parseInt(this.Clothings[x].index), parseInt(this.Clothings[x].value));
            },

            Texture: function (x, i) { 
               if (i == 0) { this.Clothings[x].texture --; if (this.Clothings[x].texture < 0) this.Clothings[x].texture = 0; }
               else if (i == 1) { this.Clothings[x].texture ++; if (this.Clothings[x].texture >= this.Clothings[x].max.texture) this.Clothings[x].texture = this.Clothings[x].max.texture; }
               mp.trigger('client:business.clothing:texture:preview', x, parseInt(this.Clothings[x].index), parseInt(this.Clothings[x].texture));
            },

            Buy: function () { 
               mp.trigger('client:business.clothing:buy', this.Cart(), this.Items(), this.Business.id);
            },

            Dollars: (i) => { return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(i); }
         }
      })
   </script>
</body>     
</html>
