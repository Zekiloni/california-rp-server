<!DOCTYPE html>
<html>
<head>
   <!-- meta tags-->
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

   <!-- source -->
   <link rel="stylesheet" type="text/css" href="src/vendor/css/fonts.css" />
   <link rel="stylesheet" type="text/css" href="src/vendor/css/font-awesome.css" />

   <link rel="stylesheet" type="text/css" href="src/styles/drinks.css" />

</head>
<body>

   <div id="drinks">
      <img class="background" src="src/images/backgrounds/drinks.png" >
      <div class="header">
         <small> Karta PiÄ‡a </small>
         <h2> {{ Truncate(Business.Name, 18) }} </h2>
         <i v-on:click="Close()" class="close fa fa-times"></i>
      </div>
      <ul class="drinks">
         <li v-for="(drink, i) in Business.Products" v-on:click="Buy(i, drink.multiplier * Business.Multiplier)">
            <img class="icon" :src="'package://player/inventory/inventory-interface/src/images/items/' + drink.hash + '.png'" />
            <h3> {{ i }} </h3>
            <h4> {{ Dollars(drink.multiplier * Business.Multiplier) }} </h4>
         </li>
      </ul>
   </div>
      
   <!-- scripts -->
   <script src="src/vendor/js/vue.js"></script>
   <script>

      let drinks = new Vue({
         el: '#drinks',
         data: {      

            Business: { 
               id: null,
               Name: 'Almirova Kafana',
               Multiplier: 4.25,
               Products: { 
                  "Soda Can":{
                     "hash":"ng_proc_sodacan_01b",
                     "multiplier":3.1
                  },
                  "Cola Can":{
                     "hash":"ng_proc_sodacan_01a",
                     "multiplier":3.35
                  },
                  "Water Bottle":{
                  "hash":"prop_ld_flow_bottle",
                  "multiplier":2.85
                  },
                  "Energy Drink":{
                  "hash":"prop_energy_drink",
                  "multiplier":4.2
                  },
                  "Juice Cup":{
                  "hash":"ng_proc_sodacup_01c",
                  "multiplier":4.7
                  },
                  "Beer Bottle":{
                  "hash":"prop_cs_beer_bot_02",
                  "multiplier":6.8
                  },
                  "Whiskey Bottle":{
                  "hash":"prop_whiskey_bottle",
                  "multiplier":24.2
                  },
                  "Vodka Bottle":{
                  "hash":"prop_vodka_bottle",
                  "multiplier":17.1
                  },
                  "Tequila Bottle":{
                  "hash":"prop_tequila_bottle",
                  "multiplier":18.05
                  },
                  "Gin Bottle":{
                  "hash":"prop_bottle_macbeth",
                  "multiplier":16
                  },
                  "Brandy Bottle":{
                  "hash":"prop_bottle_brandy",
                  "multiplier":13.18
                  },
                  "Rum Bottle":{
                  "hash":"prop_rum_bottle",
                  "multiplier":11.23
                  },
                  "Cognac Bottle":{
                  "hash":"prop_bottle_cognac",
                  "multiplier":10.72
                  },
                  "Wine Bottle":{
                  "hash":"prop_bottle_richard",
                  "multiplier":27
                  }

               }
            }
         },

         methods: { 

            Close: () => { mp.trigger('client:business.drinks:menu'); },
           
            Dollars: (i) => { return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(i); },
            Truncate: (str, n) => { return (str.length > n) ? str.substr(0, n-1) + '...' : str; },
            
            Buy: function (item, price) { 
               mp.trigger('client:business.drinks:buy', price, item, this.Business.id); 
            }

         }
      })
   </script>
</body>     
</html>
