<!DOCTYPE html>
<html>
<head>
   <!-- meta tags-->
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

   <!-- source -->
   <link rel="stylesheet" type="text/css" href="src/vendor/css/fonts.css" />
   <link rel="stylesheet" type="text/css" href="src/vendor/css/font-awesome.css" />

   <link rel="stylesheet" type="text/css" href="src/style.css" />

</head>
<body>
   <div id="dealership">
      <div class="center">
         <h2 class="business-name">
            {{ business.name }}
         </h2>

         <i v-on:click="close()" class="close fa fa-times"> </i>
      </div>

      <div class="left">
         <div class="customization" v-if="customization"> 
            <h2 class="title"> Primarna Boja Vozila </h2>
            <ul class="colors" >
               <li v-for="(color, i) in colorsList" v-on:click="Color('primary', i)" :class="{ 'selected' : colors['primary'] == i }" v-bind:style="{ backgroundColor: color }"> </li>
            </ul>
         </div>
      </div>

      <div class="right">
         <div class="preview">
            <i v-on:click="Preview(current - 1)" class="fa fa-arrow-left" aria-hidden="true"></i>
            <i v-on:click="customization = !customization" class="fa fa-paint-brush" aria-hidden="true"></i>
            <i v-on:click="Preview(current + 1)" class="fa fa-arrow-right" aria-hidden="true"></i>
         </div>

         <div class="vehicle-stats">
            <h2 class="title"> Opis vozila </h2>

            <div class="info">
               <h4> Ime Modela <b class="name"> {{ vehicles[current].name }} </b> </h4>
            </div>

            <div class="info">
               <h4> Broj Sedi≈°ta <b> {{ vehicles[current].stats.max_occupants }} </b> </h4>
               <ul class="bars"> 
                     <li id="max_occupants" v-for="(bar, i) in bars" v-bind:class="{ juppy: Bar(i, vehicles[current].stats.max_occupants) }"></li>
               </ul>
            </div>

            <div class="info">
               <h4> Ubrzanje <b> {{ vehicles[current].stats.max_acceleration }} </b> </h4>
               <ul class="bars"> 
                  <li id="max_occupants" v-for="(bar, i) in bars" v-bind:class="{ juppy: Bar(i, vehicles[current].stats.max_acceleration * 10) }"></li>
               </ul>
            </div>

         </div>

         <div class="vehicle-buy">
            <h4> cena </h4>
            <h2 class="price"> {{ moneyFormat(vehicles[current].price) }} </h2>
            <button class="buy" v-on:click="Buy()"> Kupi </button>
         </div>

      </div>

   </div>
      
   <!-- scripts -->
   <script src="src/vendor/js/vue.js"></script>
   <script>

      let dealership = new Vue({
            el: '#dealership',
            data: {

               player: { 
                  money: 0,
                  name: ''
               },

               SLICK: 0,

               business: { 
                  id: null,
                  name: 'Pepsijev Dilersip vozila'
               },

               current: 0,
               colors: { 
                  primary: 0, secondary: 0,
               },
               vehicle: { },
               customization: false,
               

               colorsList: {
                  "0": "#0d1116", "1": "#1c1d21", "2": "#32383d", "3": "#454b4f", "4": "#999da0", "5": "#c2c4c6", "6": "#979a97", "7": "#637380",
                  "8": "#63625c", "9": "#3c3f47", "10": "#444e54", "11": "#1d2129", "12": "#13181f", "13": "#26282a", "14": "#515554", "15": "#151921",
                  "16": "#1e2429", "17": "#333a3c", "18": "#8c9095", "19": "#39434d", "20": "#506272", "21": "#1e232f", "22": "#363a3f", "23": "#a0a199",
                  "24": "#d3d3d3", "25": "#b7bfca", "26": "#778794", "27": "#c00e1a", "28": "#da1918", "29": "#b6111b", "30": "#a51e23", "31": "#7b1a22",
                  "32": "#8e1b1f", "33": "#6f1818", "34": "#49111d", "35": "#b60f25", "36": "#d44a17", "37": "#c2944f", "38": "#f78616", "39": "#cf1f21",
                  "40": "#732021", "41": "#f27d20", "42": "#ffc91f", "43": "#9c1016", "44": "#de0f18", "45": "#8f1e17", "46": "#a94744", "47": "#b16c51",
                  "48": "#371c25", "49": "#132428", "50": "#122e2b", "51": "#12383c", "52": "#31423f", "53": "#155c2d", "54": "#1b6770", "55": "#66b81f",
                  "56": "#22383e", "57": "#1d5a3f", "58": "#2d423f", "59": "#45594b", "60": "#65867f", "61": "#222e46", "62": "#233155", "63": "#304c7e",
                  "64": "#47578f", "65": "#637ba7", "66": "#394762", "67": "#d6e7f1", "68": "#76afbe", "69": "#345e72", "70": "#0b9cf1", "71": "#2f2d52",
                  "72": "#282c4d", "73": "#2354a1", "74": "#6ea3c6", "75": "#112552", "76": "#1b203e", "77": "#275190", "78": "#608592", "79": "#2446a8",
                  "80": "#4271e1", "81": "#3b39e0", "82": "#1f2852", "83": "#253aa7", "84": "#1c3551", "85": "#4c5f81", "86": "#58688e", "87": "#74b5d8",
                  "88": "#ffcf20", "89": "#fbe212", "90": "#916532", "91": "#e0e13d", "92": "#98d223", "93": "#9b8c78", "94": "#503218", "95": "#473f2b",
                  "96": "#221b19", "97": "#653f23", "98": "#775c3e", "99": "#ac9975", "100": "#6c6b4b", "101": "#402e2b", "102": "#a4965f", "103": "#46231a",
                  "104": "#752b19", "105": "#bfae7b", "106": "#dfd5b2", "107": "#f7edd5", "108": "#3a2a1b", "109": "#785f33", "110": "#b5a079", "111": "#fffff6",
                  "112": "#eaeaea", "113": "#b0ab94", "114": "#453831", "115": "#2a282b", "116": "#726c57", "117": "#6a747c", "118": "#354158", "119": "#9ba0a8",
                  "120": "#5870a1", "121": "#eae6de", "122": "#dfddd0", "123": "#f2ad2e","124": "#f9a458", "125": "#83c566", "126": "#f1cc40", "127": "#4cc3da",
                  "128": "#4e6443", "129": "#bcac8f", "130": "#f8b658", "131": "#fcf9f1",  "132": "#fffffb", "133": "#81844c", "134": "#ffffff", "135": "#f21f99",
                  "136": "#fdd6cd", "137": "#df5891", "138": "#f6ae20", "139": "#b0ee6e", "140": "#08e9fa", "141": "#0a0c17", "142": "#0c0d18", "143": "#0e0d14",
                  "144": "#9f9e8a", "145": "#621276", "146": "#0b1421", "147": "#11141a", "148": "#6b1f7b", "149": "#1e1d22", "150": "#bc1917",  "151": "#2d362a",
                  "152": "#696748", "153": "#7a6c55", "154": "#c3b492", "155": "#5a6352", "156": "#81827f", "157": "#afd6e4", "158": "#7a6440", "159": "#7f6a48"
               },

               bars: 10,
               

               // test
               vehicles: [
                  { model: 'elegy', name: 'Elegy Fast', price: 35000, 
                        stats: { max_speed: 170, max_occupants: 2, max_braking: 3, max_acceleration: 0.3 }
                  },

                  { model: 'stainer', name: 'Staner Slow', price: 22500, 
                        stats: { max_speed: 145, max_occupants: 4, max_braking: 1, max_acceleration: 0.1 }
                  },

                  { model: 'infernus', name: 'Infernus Fast', price: 122500, 
                        stats: { max_speed: 215, max_occupants: 4, max_braking: 2, max_acceleration: 0.2 }
                  }

               ]

            },

            created: function () {
               this.Preview(0)
            },
            
            methods: { 

               close: function () { mp.trigger('client:vehicle.dealership'); },

               Preview: function (i) { 
                  this.current = i;
                  if (this.current >= this.vehicles.length) { this.current = 0; }
                  if (this.current < 0) { this.current = this.vehicles.length - 1; }
                  
               },

               Stats: async function (model) { 
                  let info = await mp.events.callRemoteProc('client:vehicle.info', model);
                  this.vehicle = { 
                        name: info.name, 

                  }
               },

               isColor: function (i, x) { 
                  return parseInt(this.vehicle.color[i]) == parseInt(x) ? true : false;
               },

               Color: function (i, x) { 
                  this.colors[i] = x;
               },

               Buy: function () { 
                  let vehicle = this.vehicles[this.current];
               },

               moneyFormat: function (i) { 
                  let formatter = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' });
                  return formatter.format(i);
               },

               Bar: function (i, x) { 
                  return i < x ? true : false;
               }
            }
      })


   </script>
</body>     
</html>
